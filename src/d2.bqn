#!/usr/bin/env cbqn

# -- Day 2 --
## - Part 1 -

# Determine which games would have been possible if the bag had been loaded with
# only 12 red cubes, 13 green cubes, and 14 blue cubes.
# What is the sum of the IDs of those games?

# râ€¿gâ€¿b

Split â† (âŠ¢-Ëœ+`Ã—Â¬)âˆ˜=âŠ”âŠ¢

d â† âŸ¨
  "Game 1: 3 blue, 4 red; 1 red, 2 green, 6 blue; 2 green"
  "Game 2: 1 blue, 2 green; 3 green, 4 blue, 1 red; 1 green, 1 blue"
  "Game 3: 8 green, 6 blue, 20 red; 5 blue, 4 red, 13 green; 5 green, 1 red"
  "Game 4: 1 green, 3 red, 6 blue; 3 green, 6 red; 3 green, 15 blue, 14 red"
  "Game 5: 6 red, 1 blue, 3 green; 2 blue, 1 red, 2 green"
âŸ©
d â†© â€¢Flines"../data/d2.txt"
d ' 'âŠ¸â‰ âŠ¸/Â¨â†©

PossibleGame â† {ğ•Šg:
	g {1âŠ‘ ':' Split ğ•©}â†©
  rounds â† ';' Split g
  hands â† ',' SplitÂ¨ rounds
  counts â† ('a'âŠ¸<âŠ¸âŠ”âŠ¢)Â¨Â¨hands

  colors â† "red"â€¿"green"â€¿"blue"
  ColorMask â† {ğ•Šğ•©:
    color â† 3â¥Š1â†“ğ•©
    colors â‰¡Â¨ color
  }
  Count â† â€¢Bqn âŠ‘

  hands â†© +Â´Â¨(Count Ã— ColorMask)Â¨Â¨counts
  âˆ§Â´âŸ2 12â€¿13â€¿14âŠ¸â‰¥Â¨hands
}

idxs â† 0âŠ¸â‰ âŠ¸/ (1+Â·â†•â‰ )âŠ¸Ã—(PossibleGameÂ¨) d
+Â´idxs
